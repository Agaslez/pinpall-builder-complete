# Stefano Enterprise Builder from Chat Transcript
$transcriptFile = "chat_transcript.md"
$baseDir = "stefano-enterprise"

if (-not (Test-Path $transcriptFile)) {
    Write-Host "Brak pliku $transcriptFile â€“ wklej transkrypt czatu i uruchom ponownie."
    exit
}

# Read transcript
$transcript = Get-Content $transcriptFile -Raw

# Extract sections (simple parse)
$files = @{}
$currentFile = ""
$transcript -split "\n" | ForEach-Object {
    if ($_ -match "^Create-File -Path \"(.*)\" -Content @'") {
        $currentFile = $matches[1]
        $files[$currentFile] = ""
    } elseif ($_ -match "^'@") {
        $currentFile = ""
    } elseif ($currentFile) {
        $files[$currentFile] += $_ + "`n"
    }
}

# Create base dir
New-Item -ItemType Directory -Path $baseDir -Force | Out-Null

# Create files from extracted
foreach ($path in $files.Keys) {
    $fullPath = Join-Path $baseDir $path
    $dir = Split-Path -Parent $fullPath
    if ($dir) { New-Item -ItemType Directory -Path $dir -Force | Out-Null }
    Set-Content -Path $fullPath -Value $files[$path].Trim()
}

# Generate README.md
$readmeContent = @'
# Stefano Enterprise - Instrukcja WdroÅ¼enia

1. Klonuj repo: git clone <repo> stefano-enterprise && cd stefano-enterprise

2. Konfiguracja .env: cp .env.example .env i uzupeÅ‚nij klucze.

3. Docker: docker compose up -d --build

4. Test API: curl https://localhost/api/health

5. Frontend build: cd frontend && npm i && npm run build

6. Terraform: cd terraform && terraform init && terraform apply

7. DNS: A record na IP serwera.

8. ML trening: docker compose run ml python train.py

9. Pierwszy post: curl -X POST /api/admin/marketing/create -d '{"platform":"facebook","media_url":"https://example.com/pizza.jpg"}'

10. Approval: Review/Approve/Schedule przez /admin.html

11. SprawdÅº post: SELECT * FROM marketing_jobs

Playbook ZespoÅ‚u
- RACI: Content Lead (R briefy), Creative (R MP4), SMM (A publikacje), Performance (R ROI), Data (R dashboardy), ML (C boty).
- Cadence: Pon plan, dzienny stand-up, Pt retro.
- DoD: KPI, QC zielone, 2 OK, slot zaplanowany.
- Rubryka jakoÅ›ci: min 4/5 (hook/CTA/wizual).
- Kontrola social: Monitoring opinii, playbook kryzys, compliance.

Backup: 0 3 * * * docker exec db pg_dump -U stefano stefano | gzip > /backup/db-$(date +%F).gz

Testy: npm test, python -m unittest, curl healthchecks.

Powodzenia! ðŸš€
'@

Set-Content -Path (Join-Path $baseDir "README.md") -Value $readmeContent

Write-Host "Projekt Stefano Enterprise stworzony w $baseDir na podstawie czatu. OtwÃ³rz w VS Code: code $baseDir"
Write-Host "README.md zawiera instrukcje â€“ przeczytaj i odpal docker compose up -d --build"